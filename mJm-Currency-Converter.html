<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>mJm Currency Converter – Live Exchange Rates</title>
  <meta name="description" content="Use the mJm Currency Converter to quickly convert money using today's live exchange rates. Simple, fast, and accurate." />
  <meta name="keywords" content="currency converter, exchange rates today, USD to EUR, EGP to USD, forex, money calculator, mJm Travel" />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://example.com/mjm-currency-converter.html" />

  <style>
    :root { --bg1:#0d47a1; --bg2:#1976d2; --bg3:#42a5f5; --accent:#ffca28; }
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
      color: #fff; text-align: center; padding: 48px 16px;
    }
    header { max-width: 900px; margin: 0 auto 24px; }
    h1 { font-size: 2.4rem; margin: 0 0 8px; text-shadow: 2px 2px 6px rgba(0,0,0,.35); }
    p.lead { font-size: 1.1rem; margin: 0; opacity: .95; }
    .card {
      max-width: 900px; margin: 28px auto; padding: 24px;
      background: rgba(255,255,255,.12); border-radius: 18px; backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .grid {
      display: grid; gap: 14px; grid-template-columns: 1fr; align-items: center;
    }
    @media (min-width: 720px) {
      .grid { grid-template-columns: 1fr auto 1fr; }
    }
    label { display: block; font-weight: 600; text-align: left; margin-bottom: 6px; }
    .field { text-align: left; }
    input[type="number"], select {
      width: 100%; padding: 12px 14px; font-size: 1rem; border: none; border-radius: 10px; outline: none;
    }
    .swap {
      display: inline-flex; align-items: center; justify-content: center;
      width: 46px; height: 46px; border-radius: 999px; border: none; cursor: pointer;
      background: var(--accent); color: #000; font-weight: 700; transition: transform .15s ease;
    }
    .swap:hover { transform: rotate(180deg) scale(1.03); }
    .actions { margin-top: 12px; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
    .btn {
      padding: 12px 18px; border: none; border-radius: 12px; font-weight: 700; cursor: pointer;
      background: var(--accent); color: #000; transition: transform .15s ease, filter .15s ease;
    }
    .btn:hover { transform: translateY(-1px); filter: brightness(1.05); }
    #result {
      margin-top: 18px; font-size: 1.35rem; font-weight: 800;
      text-shadow: 0 1px 3px rgba(0,0,0,.3);
    }
    .muted { margin-top: 10px; font-size: .95rem; opacity: .9; }
    .error { margin-top: 10px; font-size: .95rem; background: rgba(255,255,255,.15); padding: 10px 12px; border-radius: 10px; }
    footer { margin-top: 40px; font-size: .9rem; opacity: .85; }
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
  </style>
</head>
<body>
  <header>
    <h1>mJm Currency Converter</h1>
    <p class="lead">Convert currencies instantly with today's live exchange rates.</p>
  </header>

  <main class="card" aria-labelledby="converter-title">
    <h2 id="converter-title" class="sr-only">Currency Converter</h2>

    <div class="grid">
      <div class="field">
        <label for="amount">Amount</label>
        <input id="amount" type="number" inputmode="decimal" step="any" min="0" placeholder="Enter amount" value="1" />
      </div>

      <div class="field" aria-hidden="true" style="text-align:center;">
        <button class="swap" id="swapBtn" title="Swap currencies" aria-label="Swap currencies">⇄</button>
      </div>

      <div class="field">
        <label for="toCurrency">Convert To</label>
        <select id="toCurrency"></select>
      </div>

      <div class="field">
        <label for="fromCurrency">From Currency</label>
        <select id="fromCurrency"></select>
      </div>

      <div class="field"></div>

      <div class="field"></div>
    </div>

    <div class="actions">
      <button class="btn" id="convertBtn">Convert</button>
      <button class="btn" id="refreshBtn">Refresh Rates</button>
    </div>

    <div id="result" role="status" aria-live="polite"></div>
    <div id="meta" class="muted"></div>
    <div id="error" class="error" style="display:none;"></div>
  </main>

  <footer>
    <p>© 2025 mJm Travel • Live rates via exchangerate.host</p>
  </footer>

  <script defer>
    const fromSelect = document.getElementById('fromCurrency');
    const toSelect   = document.getElementById('toCurrency');
    const amountEl   = document.getElementById('amount');
    const resultEl   = document.getElementById('result');
    const metaEl     = document.getElementById('meta');
    const errorEl    = document.getElementById('error');
    const swapBtn    = document.getElementById('swapBtn');
    const convertBtn = document.getElementById('convertBtn');
    const refreshBtn = document.getElementById('refreshBtn');

    // Fallback currency list in case the symbols API is unreachable
    const FALLBACK_CODES = [
      "USD","EUR","GBP","EGP","AED","SAR","QAR","KWD","JOD","MAD","TND","DZD","TRY","ILS",
      "INR","PKR","BDT","LKR","CNY","JPY","KRW","HKD","TWD","THB","MYR","IDR","SGD",
      "AUD","NZD","CAD","CHF","NOK","SEK","DKK","PLN","CZK","HUF","RON","BGN","HRK",
      "BRL","MXN","ARS","CLP","COP","PEN","ZAR","NGN","GHS","KES","ETB","VND","PHP","UAH"
    ];

    let lastRatesDate = null;

    function showError(msg) {
      errorEl.textContent = msg;
      errorEl.style.display = 'block';
    }
    function clearError() {
      errorEl.textContent = '';
      errorEl.style.display = 'none';
    }

    function populateSelects(codes) {
      const options = codes
        .filter(Boolean)
        .sort()
        .map(c => `<option value="${c}">${c}</option>`)
        .join('');
      fromSelect.innerHTML = options;
      toSelect.innerHTML = options;

      // Set sensible defaults
      fromSelect.value = "USD";
      toSelect.value = "EUR";
      if (!fromSelect.value) fromSelect.selectedIndex = 0;
      if (!toSelect.value)   toSelect.selectedIndex = Math.min(1, toSelect.options.length-1);
    }

    async function loadSymbols() {
      // Try the official symbols endpoint
      try {
        const r = await fetch("https://api.exchangerate.host/symbols", { cache: "no-store" });
        if (!r.ok) throw new Error("Symbols request failed");
        const j = await r.json();
        if (j && j.symbols) {
          const codes = Object.keys(j.symbols);
          if (codes.length) {
            populateSelects(codes);
            return true;
          }
        }
        throw new Error("Symbols missing in response");
      } catch (e) {
        // Fallback: use embedded list so the UI still works
        populateSelects(FALLBACK_CODES);
        return false;
      }
    }

    async function convertCurrency() {
      clearError();
      const amount = parseFloat(amountEl.value || "0");
      const from = fromSelect.value;
      const to   = toSelect.value;
      if (!from || !to) {
        showError("Currencies not loaded. Please click Refresh Rates.");
        return;
      }
      if (!(amount >= 0)) {
        showError("Please enter a valid amount.");
        return;
      }

      // Primary: use convert endpoint
      try {
        const url = `https://api.exchangerate.host/convert?from=${encodeURIComponent(from)}&to=${encodeURIComponent(to)}&amount=${encodeURIComponent(amount)}&places=6`;
        const r = await fetch(url, { cache: "no-store" });
        if (!r.ok) throw new Error("Convert request failed");
        const j = await r.json();
        if (j && typeof j.result === "number") {
          const out = j.result;
          lastRatesDate = j.date || null;
          resultEl.textContent = `${amount.toLocaleString(undefined, { maximumFractionDigits: 6 })} ${from} = ${out.toLocaleString(undefined, { maximumFractionDigits: 6 })} ${to}`;
          metaEl.textContent = lastRatesDate ? `Last update: ${lastRatesDate}` : '';
          return;
        }
        throw new Error("Unexpected response format");
      } catch (e) {
        // Fallback: fetch base rates and compute manually
        try {
          const baseUrl = `https://api.exchangerate.host/latest?base=${encodeURIComponent(from)}`;
          const r2 = await fetch(baseUrl, { cache: "no-store" });
          if (!r2.ok) throw new Error("Latest request failed");
          const j2 = await r2.json();
          if (j2 && j2.rates && j2.rates[to]) {
            const rate = j2.rates[to];
            lastRatesDate = j2.date || null;
            const out = amount * rate;
            resultEl.textContent = `${amount.toLocaleString(undefined, { maximumFractionDigits: 6 })} ${from} = ${out.toLocaleString(undefined, { maximumFractionDigits: 6 })} ${to}`;
            metaEl.textContent = lastRatesDate ? `Last update: ${lastRatesDate}` : '';
            return;
          }
          throw new Error("Target currency not found in rates");
        } catch (e2) {
          showError("Could not fetch live rates. Please check your connection and try Refresh Rates.");
        }
      }
    }

    async function init() {
      await loadSymbols();
      await convertCurrency();
    }

    // Events
    convertBtn.addEventListener('click', convertCurrency);
    refreshBtn.addEventListener('click', init);
    swapBtn.addEventListener('click', () => {
      const a = fromSelect.value;
      fromSelect.value = toSelect.value;
      toSelect.value = a;
      convertCurrency();
    });
    fromSelect.addEventListener('change', convertCurrency);
    toSelect.addEventListener('change', convertCurrency);
    amountEl.addEventListener('input', () => {
      // light debounce
      clearTimeout(amountEl._t);
      amountEl._t = setTimeout(convertCurrency, 200);
    });

    // Kick off
    init();
  </script>
</body>
</html>
