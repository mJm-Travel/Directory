<!DOCTYPE html>
<html>
<head>
  <meta property="og:locale" content="en_US" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="mJm Travel" />
<link rel="pingback" href="https://mjm-travel.freesite.host/xmlrpc.php"><link rel="icon" href="https://mjm-travel.freesite.host/wp-content/uploads/2025/03/cropped-mJm-Travel-Logo-32x32.jpeg" sizes="32x32" />
<link rel="icon" href="https://mjm-travel.freesite.host/wp-content/uploads/2025/03/cropped-mJm-Travel-Logo-192x192.jpeg" sizes="192x192" />
<link rel="apple-touch-icon" href="https://mjm-travel.freesite.host/wp-content/uploads/2025/03/cropped-mJm-Travel-Logo-180x180.jpeg" />
<meta name="msapplication-TileImage" content="https://mjm-travel.freesite.host/wp-content/uploads/2025/03/cropped-mJm-Travel-Logo-270x270.jpeg" />
  <meta charset="UTF-8">
  <title>Egypt Travel Directory</title>
  <style>
    ul { list-style-type: none; margin-left: 20px; }
    li { margin: 4px 0; }
  </style>
</head>
<body>
  <p><a href="https://mjm-travel.github.io/Directory/">üìÇ Back To Main Directory</a></p>
  <h1>üìÇ Egypt Travel Directory</h1>
  <ul id="repo-tree"></ul>
<script>
  const repoOwner = "mJm-Travel"; // your GitHub username/org
  const repoName = "Directory";    // your repo name
  const branch = "main";           // branch name

  async function loadRepoTree() {
    const url = `https://api.github.com/repos/${repoOwner}/${repoName}/git/trees/${branch}?recursive=1`;

    try {
      const response = await fetch(url);
      const data = await response.json();
      const files = data.tree;

      // --- Detect current folder ---
      // Example: /Directory/Egypt/index.html
      let pathParts = window.location.pathname.split("/").filter(p => p);

      // Find repo root in path (e.g., "Directory")
      const repoIndex = pathParts.indexOf(repoName);

      // Folder immediately after repo is the current folder (Egypt)
      const currentFolder = pathParts[repoIndex + 1] + "/"; // "Egypt/"

      // --- Build nested structure only for current folder ---
      let root = {};
      files.forEach(item => {
        if (item.path.split("/").pop() === "index.html") return;

        // Only keep files inside the current folder
        if (!item.path.startsWith(currentFolder)) return;

        // Path relative to current folder
        let relativePath = item.path.substring(currentFolder.length);
        if (!relativePath) return;

        let parts = relativePath.split("/");
        let current = root;
        parts.forEach((part, i) => {
          if (!current[part]) {
            current[part] = { __type: i === parts.length - 1 ? item.type : "tree" };
          }
          current = current[part];
        });
      });

      function buildList(obj, basePath = "") {
        let ul = document.createElement("ul");
        for (let name in obj) {
          if (name === "__type") continue;
          let li = document.createElement("li");

          if (obj[name].__type === "blob") {
            let a = document.createElement("a");
            if (name.endsWith(".html")) {
              a.href = `https://${repoOwner}.github.io/${repoName}/${currentFolder}${basePath}${name}`;
            } else {
              a.href = `https://github.com/${repoOwner}/${repoName}/blob/${branch}/${currentFolder}${basePath}${name}`;
            }
            a.textContent = name;
            a.target = "_blank";
            li.appendChild(a);
          } else {
            li.textContent = "üìÅ " + name;
            li.appendChild(buildList(obj[name], basePath + name + "/"));
          }

          ul.appendChild(li);
        }
        return ul;
      }

      document.getElementById("repo-tree").appendChild(buildList(root));

    } catch (err) {
      console.error("Error loading repo tree:", err);
    }
  }

  loadRepoTree();
</script>



 


</body>
</html>
